
    <!DOCTYPE html>
    <html lang="fr">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Rapport d'analyse faciale - Xavier Dupont de Ligonnès</title>
        <style>
            body {
                font-family: 'Segoe UI', Arial, sans-serif;
                margin: 0;
                padding: 0;
                background-color: #f5f5f5;
                color: #333;
            }
            .container {
                max-width: 1200px;
                margin: 0 auto;
                padding: 20px;
            }
            .header {
                background: linear-gradient(135deg, #1e5799 0%, #2989d8 50%, #207cca 100%);
                color: white;
                padding: 20px;
                border-radius: 8px 8px 0 0;
                box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            }
            .header-flex {
                display: flex;
                justify-content: space-between;
                align-items: center;
            }
            .timestamp {
                font-size: 14px;
                opacity: 0.9;
            }
            .section {
                background-color: white;
                margin-top: 20px;
                padding: 20px;
                border-radius: 8px;
                box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            }
            .summary-box {
                display: flex;
                justify-content: space-between;
                margin-bottom: 20px;
            }
            .summary-item {
                background-color: #f9f9f9;
                padding: 15px;
                border-radius: 8px;
                flex: 1;
                margin: 0 10px;
                text-align: center;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            .summary-item h3 {
                margin-top: 0;
                font-size: 16px;
                color: #666;
            }
            .summary-item p {
                font-size: 24px;
                font-weight: bold;
                margin: 10px 0;
            }
            .confidence {
                color: #B22222;
                font-weight: bold;
            }
            .match {
                color: #228B22;
                font-weight: bold;
            }
            .no-match {
                color: #B22222;
                font-weight: bold;
            }
            table {
                width: 100%;
                border-collapse: collapse;
                margin: 20px 0;
            }
            th, td {
                border: 1px solid #ddd;
                padding: 12px;
                text-align: left;
            }
            th {
                background-color: #f2f2f2;
                position: sticky;
                top: 0;
            }
            tr:nth-child(even) {
                background-color: #f9f9f9;
            }
            tr:hover {
                background-color: #f1f1f1;
            }
            .result-img {
                max-width: 100%;
                height: auto;
                margin-top: 10px;
                border-radius: 4px;
                box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }
            .side-by-side {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 20px;
                margin-top: 20px;
            }
            .metrics-box {
                display: flex;
                flex-wrap: wrap;
                gap: 10px;
                margin-top: 10px;
            }
            .metric {
                background-color: #f0f0f0;
                padding: 8px 12px;
                border-radius: 4px;
                font-size: 14px;
                flex-grow: 1;
                text-align: center;
            }
            .feature-metric {
                background-color: #e8f4ff;
                padding: 8px 12px;
                border-radius: 4px;
                font-size: 14px;
                margin: 4px;
                display: inline-block;
            }
            .feature-metric.good {
                background-color: #e6ffe6;
            }
            .feature-metric.bad {
                background-color: #ffebeb;
            }
            .footer {
                margin-top: 30px;
                text-align: center;
                font-size: 12px;
                color: #777;
            }
            .info-icon {
                color: #2989d8;
                cursor: help;
                position: relative;
            }
            .bar-container {
                width: 100%;
                background-color: #e0e0e0;
                border-radius: 4px;
                margin-top: 5px;
            }
            .bar {
                height: 10px;
                border-radius: 4px;
                background: linear-gradient(90deg, #1e5799 0%, #2989d8 100%);
            }
            .image-quality {
                padding: 6px 12px;
                border-radius: 4px;
                font-weight: bold;
                color: white;
                display: inline-block;
                margin-top: 10px;
            }
            .quality-high {
                background-color: #4CAF50;
            }
            .quality-medium {
                background-color: #FF9800;
            }
            .quality-low {
                background-color: #F44336;
            }
            .points-box {
                margin-top: 15px;
                border: 1px solid #ddd;
                border-radius: 4px;
                padding: 10px;
            }
            .warning-box {
                background-color: #fff9e6;
                border-left: 4px solid #ffcc00;
                padding: 10px 15px;
                margin: 15px 0;
                border-radius: 0 4px 4px 0;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="header">
                <div class="header-flex">
                    <h1>Rapport d'analyse faciale - Xavier Dupont de Ligonnès</h1>
                    <div class="timestamp">
                        <div>Date: 27/04/2025</div>
                        <div>Heure: 05:42:54</div>
                    </div>
                </div>
            </div>
            
            <div class="section">
                <h2>Résumé de l'analyse</h2>
                <div class="warning-box">
                    <p><strong>Note importante:</strong> Cette analyse est basée sur des images potentiellement anciennes ou de mauvaise qualité de Xavier Dupont de Ligonnès. Les scores ont été ajustés pour tenir compte de cette limitation.</p>
                </div>
                <div class="summary-box">
                    <div class="summary-item">
                        <h3>Total des comparaisons</h3>
                        <p>4</p>
                    </div>
                    <div class="summary-item">
                        <h3>Correspondances trouvées</h3>
                        <p>1</p>
                    </div>
                    <div class="summary-item">
                        <h3>Niveau de confiance</h3>
                        <p class="confidence">Faible</p>
                        <div class="bar-container">
                            <div class="bar" style="width: 27.24%;"></div>
                        </div>
                    </div>
                </div>
    
                <h3>Principale correspondance identifiée</h3>
                <p class="match">✓ L'image <strong>image1.JPG</strong> correspond à <strong>7fc05c8a15a6ca2f-580x0-1.webp</strong> avec une similarité de <strong>0.2724</strong></p>
                <div class="image-quality quality-low">Qualité d'image: 0.38</div>
            </div>
            
            <div class="section">
                <h2>Détails de la meilleure correspondance</h2>
                <div class="side-by-side">
                    <div>
                        <h3>Métriques de similarité</h3>
                        <div class="metrics-box">
                            <div class="metric">Score global: <strong>0.2724</strong></div>
                            <div class="metric">Corrélation: <strong>0.7303000092506409</strong></div>
                            <div class="metric">Similarité d'histogramme: <strong>-0.0336</strong></div>
                            <div class="metric">SSIM: <strong>0.2003</strong></div>
                            <div class="metric">Points faciaux: <strong>0.0</strong></div>
                        </div>
                        
                        <h3>Points caractéristiques</h3>
                        <div class="points-box">
        <p>Aucun point caractéristique commun n'a pu être détecté.</p>
                        </div>
                    </div>
                    <div>
                        <h3>Interprétation et ajustements pour image de qualité limitée</h3>
        
                <p>Les images analysées sont de <strong>qualité réduite</strong>, ce qui peut affecter la précision de la reconnaissance. Pour compenser:</p>
                <ul>
                    <li>Le seuil de correspondance a été abaissé à <strong>0.4062</strong> (normalement 0.35)</li>
                    <li>Une plus grande importance a été accordée à la correspondance structurelle globale</li>
                    <li>Les différences d'éclairage et de contraste ont été normalisées</li>
                </ul>
            
                    </div>
                </div>
                <h3>Comparaison visuelle</h3>
                <img class="result-img" src="comparaison_{best_match['suspect_image']}_{best_match['criminal_image']}.png" alt="Meilleure correspondance">
            </div>
        
            <div class="section">
                <h2>Tableau des comparaisons</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Image suspecte</th>
                            <th>Image criminelle</th>
                            <th>Score global</th>
                            <th>Corrélation</th>
                            <th>Points faciaux</th>
                            <th>Qualité image</th>
                            <th>Correspondance</th>
                        </tr>
                    </thead>
                    <tbody>
    
                    <tr>
                        <td>image1.JPG</td>
                        <td>7fc05c8a15a6ca2f-580x0-1.webp</td>
                        <td><strong>0.2724</strong></td>
                        <td>0.7303000092506409</td>
                        <td>0.0</td>
                        <td><span class="image-quality quality-low" style="margin:0; padding:2px 5px;">0.38</span></td>
                        <td class="no-match">✗ False</td>
                    </tr>
        
                    <tr>
                        <td>image1.JPG</td>
                        <td>image1.png</td>
                        <td><strong>0.0935</strong></td>
                        <td>0.10939999669790268</td>
                        <td>0.0</td>
                        <td><span class="image-quality quality-medium" style="margin:0; padding:2px 5px;">0.62</span></td>
                        <td class="no-match">✗ False</td>
                    </tr>
        
                    <tr>
                        <td>image1.JPG</td>
                        <td>image2.JPG</td>
                        <td><strong>0.0395</strong></td>
                        <td>0.10029999911785126</td>
                        <td>0.0</td>
                        <td><span class="image-quality quality-low" style="margin:0; padding:2px 5px;">0.12</span></td>
                        <td class="no-match">✗ False</td>
                    </tr>
        
                    <tr>
                        <td>image1.JPG</td>
                        <td>xavier-dupont-de-ligonnes-cet-etrange-tic-qui-le-trahit.jpeg</td>
                        <td><strong>-0.1497</strong></td>
                        <td>-0.3312000036239624</td>
                        <td>0.0</td>
                        <td><span class="image-quality quality-low" style="margin:0; padding:2px 5px;">0.38</span></td>
                        <td class="no-match">✗ False</td>
                    </tr>
        
                    </tbody>
                </table>
            </div>
            
            <div class="section">
                <h2>Méthodologie et interprétation - Adaptation pour Xavier Dupont de Ligonnès</h2>
                <p>Cette analyse est spécialement adaptée pour comparer des images d'époque ou de qualité limitée de Xavier Dupont de Ligonnès avec des suspects potentiels :</p>
                <div class="side-by-side">
                    <div>
                        <h3>Métriques utilisées</h3>
                        <ul>
                            <li><strong>Score global</strong>: Combinaison pondérée des métriques, ajustée pour les images anciennes</li>
                            <li><strong>Corrélation</strong>: Similarité structurelle après normalisation du contraste</li>
                            <li><strong>Points faciaux</strong>: Correspondance des éléments du visage (yeux, nez, bouche) même avec des images parcellaires</li>
                            <li><strong>Qualité image</strong>: Évaluation de la fiabilité des résultats basée sur la netteté et la complétude des détails</li>
                        </ul>
                    </div>
                    <div>
                        <h3>Adaptations pour images anciennes</h3>
                        <ul>
                            <li><strong>Seuil dynamique</strong>: Abaissé pour les images de faible qualité</li>
                            <li><strong>Détection améliorée</strong>: Algorithmes optimisés pour les visages partiellement visibles</li>
                            <li><strong>Normalisation</strong>: Correction des différences d'éclairage et de contraste</li>
                            <li><strong>Analyse structurelle</strong>: Accent mis sur les proportions du visage plutôt que sur les détails fins</li>
                        </ul>
                    </div>
                </div>
                <div class="warning-box">
                    <p><strong>Limitations importantes:</strong> Les comparaisons basées sur des images anciennes ou de mauvaise qualité présentent des risques d'erreur plus élevés. Cette analyse doit être considérée comme un indice préliminaire et non comme une preuve formelle. D'autres éléments d'enquête doivent être pris en compte.</p>
                </div>
            </div>
            
            <div class="footer">
                <p>Rapport généré le {date_analyse} à {heure_analyse} • Analyse faciale XDDL • Version 2.0</p>
            </div>
        </div>
    </body>
    </html>
    